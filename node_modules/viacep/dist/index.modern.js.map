{"version":3,"file":"index.modern.js","sources":["../src/error.ts","../src/request.ts","../src/index.ts"],"sourcesContent":["export class ViaCEPError {\n  status: number\n  statusText: string\n\n  constructor(error: Response) {\n    this.status = error.status\n    this.statusText = error.statusText\n  }\n}\n","import fetch, { Response as FetchResponse } from 'node-fetch'\n\nimport { ViaCEPError } from './error'\n\nexport class Request {\n  request: any\n\n  public async makeApiRequest<Response>(uri: string): Promise<Response> {\n    try {\n      const response = await fetch(`https://viacep.com.br/ws/${uri}/json`, {\n        headers: {\n          'Content-Type': 'application/json; charset=utf-8',\n        },\n      })\n\n      if (!response.ok) {\n        throw response\n      }\n\n      const data = await response.json()\n\n      if (data.erro) {\n        throw new FetchResponse(null, {\n          status: 404,\n          statusText: 'A pesquisa n√£o retornou dados',\n        })\n      }\n\n      return data\n    } catch (error) {\n      switch (error.status) {\n        case 400:\n        case 404:\n          throw new ViaCEPError(error)\n        default:\n          throw error\n      }\n    }\n  }\n}\n","import { Address, State } from './models'\nimport { Request } from './request'\n\nexport * from './models'\n\nexport class ViaCEP {\n  private readonly request: Request\n\n  constructor() {\n    this.request = new Request()\n  }\n\n  async cep(cep: string): Promise<Address>\n  async cep({\n    state,\n    city,\n    street,\n  }: {\n    state: State\n    city: string\n    street: string\n  }): Promise<Address[]>\n  async cep(\n    params:\n      | string\n      | {\n          state: State\n          city: string\n          street: string\n        },\n  ): Promise<Address | Address[]> {\n    if (typeof params === 'string') {\n      return await this.request.makeApiRequest<Address>(`${params}`)\n    }\n    return await this.request.makeApiRequest<Address[]>(\n      encodeURI(`${params.state}/${params.city}/${params.street}`),\n    )\n  }\n}\n"],"names":["ViaCEPError","constructor","error","this","status","statusText","Request","[object Object]","uri","response","fetch","headers","Content-Type","ok","data","json","erro","FetchResponse","ViaCEP","request","params","makeApiRequest","encodeURI","state","city","street"],"mappings":"+CAAaA,EAIXC,YAAYC,GACVC,KAAKC,OAASF,EAAME,OACpBD,KAAKE,WAAaH,EAAMG,kBCFfC,EAGJC,qBAA+BC,GACpC,IACE,MAAMC,QAAiBC,8BAAkCF,SAAY,CACnEG,QAAS,CACPC,eAAgB,qCAIpB,IAAKH,EAASI,GACZ,MAAMJ,EAGR,MAAMK,QAAaL,EAASM,OAE5B,GAAID,EAAKE,KACP,UAAUC,EAAc,KAAM,CAC5Bb,OAAQ,IACRC,WAAY,kCAIhB,OAAOS,EACP,MAAOZ,GACP,OAAQA,EAAME,QACZ,SACA,SACE,UAAUJ,EAAYE,GACxB,QACE,MAAMA,WC9BHgB,EAGXjB,cACEE,KAAKgB,QAAU,IAAIb,EAarBC,UACEa,GAQA,MAAsB,iBAAXA,aACSD,QAAQE,kBAA2BD,cAErCD,QAAQE,eACxBC,aAAaF,EAAOG,SAASH,EAAOI,QAAQJ,EAAOK"}